<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูพุงูโุฑุณุงู ุจูุงุฏุฑูฺฏ</title>
    <!-- ููุฏ ฺฉุฑุฏู Tailwind CSS ุจุฑุง ฺฉูุงุณโูุง ฺฉูฺฉ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- ููฺฉ ฺฉุฑุฏู ูุงู ุงุณุชุงู ุณูุงุฑุด -->
    <link rel="stylesheet" href="style.css">
    
</head>
<body class="flex items-center justify-center min-h-screen">

    <!-- ฺฉุงูุชูุฑ ุงุตู ุงูพูฺฉุดู -->
    <div id="app-container">

        <!-- ุตูุญู ุงุญุฑุงุฒ ููุช (ูุฑูุฏ/ุซุจุช ูุงู) -->
        <div id="auth-container" class="h-full hidden flex-col justify-center items-center p-8">
            <h1 class="text-3xl font-extrabold mb-6" style="color: var(--chat-header-bg);">ูุฑูุฏ ุจู ูพุงูโุฑุณุงู ๐</h1>
            <input type="text" id="auth-username" placeholder="ูุงู ฺฉุงุฑุจุฑ (ุญุฏุงูู ณ ฺฉุงุฑุงฺฉุชุฑ)" required maxlength="20" class="mb-4">
            <input type="password" id="auth-password" placeholder="ฺฏุฐุฑูุงฺู (ุญุฏุงูู ถ ฺฉุงุฑุงฺฉุชุฑ)" required maxlength="20" class="mb-6">
            <button id="login-button" class="mb-3">ูุฑูุฏ</button>
            <button id="register-button">ุซุจุช ูุงู</button>
            <p id="user-id-display" class="mt-4 text-xs text-gray-400 text-center select-all hidden"></p>
        </div>

        <!-- ุตูุญู ฺุช -->
        <div id="chat-container" class="flex flex-col h-full hidden">
            
            <!-- ูุฏุฑ ฺุช -->
            <div class="chat-header">
                <div class="header-controls">
                    <button id="dark-mode-toggle" title="ุชุบุฑ ุญุงูุช">๐</button>
                    <button id="profile-toggle" title="ูพุฑููุงู ู ุชูุธูุงุช">๐ค</button>
                </div>
                <span id="header-title">ฺุช ฺฏุฑูู</span>
                <div class="w-8"></div>
            </div>
            
            <!-- ูุงุญู ูพุงูโูุง -->
            <div id="messages" class="flex-grow p-4 overflow-y-auto flex flex-col">
                <!-- ูพุงูโูุง ุฏุฑ ุงูุฌุง ุงุถุงูู ุฎูุงููุฏ ุดุฏ -->
            </div>

            <!-- ูุงุญู ูุฑูุฏ ูพุงู -->
            <div id="input-area" class="p-4 border-t flex items-center gap-2">
                <input type="text" id="message-input" placeholder="ูพุงู ุดูุง..." 
                       class="flex-grow">
                <button id="send-button">
                </button>
            </div>
        </div>

        <!-- ูพูู ูพุฑููุงู ู ุชูุธูุงุช (ุจู ุทูุฑ ูพุดโูุฑุถ ูุฎู ู ุฎุงุฑุฌ ุงุฒ ุฏุฏ) -->
        <div id="profile-panel" class="hidden">
            <button class="profile-close-btn" id="profile-close-button" title="ุจุณุชู ูพูู">โ</button>
            
            <h2 class="text-xl font-bold mt-4 mb-5 text-center">ูุดุฎุตุงุช ฺฉุงุฑุจุฑ</h2>
            
            <div class="profile-info">
                <p>ูุงู ฺฉุงุฑุจุฑ: <span id="profile-username">...</span></p>
            </div>
            
            <div class="profile-info">
                <p>ุดูุงุณู ฺฉุงุฑุจุฑ (UID): <span id="profile-uid" class="select-all">...</span></p>
                <p class="text-xs mt-2 opacity-70">ุงู ุดูุงุณู ุจุฑุง ุงุญุฑุงุฒ ููุช ุดูุง ุฏุฑ ุฏุชุงุจุณ ุงุณุชูุงุฏู ูโุดูุฏ.</p>
            </div>
            
            <div class="profile-info">
                <p>ูุฏุฑุช ุงฺฉุงูุช:</p>
                <p class="text-sm mt-1 opacity-80">ุจุง ุฎุฑูุฌุ ูโุชูุงูุฏ ุจุง ุงฺฉุงูุช ุฏฺฏุฑ ูุงุฑุฏ ุดูุฏ ุง ุงฺฉุงูุช ุฌุฏุฏ ุจุณุงุฒุฏ.</p>
            </div>

            <button id="logout-switch-button">ุฎุฑูุฌ ู ุชุนูุถ ุงฺฉุงูุช</button>
        </div>
        
    </div>

    <!-- ููุฏ ฺฉุฑุฏู ูุงู ููุทู ุจุฑูุงูู (type="module" ุงูุฒุงู ุงุณุช) -->
    <script type="module" src="script.js"></script>
</body>
</html>